https://developer.android.google.cn/studio/profile













## 内存抖动

频繁的创建一次性对象导致内存不断攀升，在刚触发GC回收动作之后又迅速涨起来，然后又触发GC。一次性对象的创建和GC的这种循环往复的状态在Android中叫做内存抖动（Memory Churn）。所以内存抖动其实并不是我们的内存在整体地进行摇晃这样神奇的事情。

比如自定View的onDraw()方法中创建一次性对象，界面频繁刷新（为了不掉帧需要在16ms内完成一次回值）会导致内存抖动，所以频繁调用的方法中不适合创建对象，尤其是for创建大量对象。内存的回收虽然很快，时间成本很低，但终究是有时间成本的。一两次内存回收不容易被用户察觉，但多次内存回收行为集中在短时间内爆发，这就造成了比较大的界面卡顿的风险。这也是为什么Android在官方文档和Android Studio里都建议我们尽量避免在onDraw()里创建对象。同样的道理，不只是在 onDraw()，在次数比较大的循环里创建对象，同样会导致内存抖动。

使用adb命令查看手机给每个应用分配的内存大小：
C:\Users\admin>adb shell getprop dalvik.vm.heapsize
512m














