Google 相关网址

Firebase： https://firebase.google.com/

开发中控制台：https://play.google.com/console

gmail： https://mail.google.com

Google docs： https://docs.google.com

Google sites:  https://sites.google.com





**去除ads、auth、applovin、billing**、  com.android.vending.derived.apk.id

```
<meta-data android:name="com.android.dynamic.apk.fused.modules" android:value="base"/>
<meta-data android:name="com.android.stamp.source" android:value="https://play.google.com/store"/>
<meta-data android:name="com.android.stamp.type" android:value="STAMP_TYPE_STANDALONE_APK"/>
<meta-data android:name="com.android.vending.splits" android:resource="@xml/splits0"/>
```

- **去除支付库**

  搜索“com.android.vending”，删除billing

- [**firebase**](https://console.firebase.google.com)

  去firebase注册应用，下载google-services.json，复制firebase_database_url

  Firebase 相关key在values/strings.xml 对应的资源名字 (**如果这个包有**)：

  ```xnl
  <string name="default_web_client_id"></string>
  <string name="firebase_database_url"></string>
  <string name="gcm_defaultSenderId">/string>
  <string name="google_api_key"></string>
  <string name="google_app_id"></string>
  <string name="google_crash_reporting_api_key"></string>
  <string name="google_storage_bucket"></string>
  <string name="project_id"></string>
  
  ```

  ![](/Users/openxu/Desktop/openXu/home/openXu-Notes/Android/逆向/image/firebase-key.jpg)

  

- **faseback归因统计**

  https://mkg2yfdvwq.feishu.cn/docx/SIXydhkEyo0PGUxKZTOcAeMun0Q

  将fb_b9.0.0.zip中的smali复制到工程中`cp -rf /Users/openxu/Desktop/work/workspace/fb_b9.0.0/smali_classes3 .`

  > 如果拷贝代码后打包报错： Unsigned short value out of range: 67072，是因为方法数超过65535，在工程中手动创建一个smali_classesX文件夹，修改fb_b9.0.0/smali_classesX文件夹名称，修改命令cp -rf /Users/openxu/Desktop/work/workspace/fb_b9.0.0/smali_classesX .即可

  ```xml
  <!-- 基本权限 -->
  <uses-permission android:name="android.permission.INTERNET" />
  <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
  <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
  <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />
  <uses-permission android:name="android.permission.WAKE_LOCK" />
  <uses-permission android:name="com.google.android.gms.permission.AD_ID"/>
  
  <!-- facebook sdk-->
  <uses-permission android:name="com.google.android.finsky.permission.BIND_GET_INSTALL_REFERRER_SERVICE"/>
  
  <!-- pin sdk -->
  <queries>
        <intent>
            <action android:name="android.intent.action.SEND" />
            <data android:mimeType="*/*" />
       </intent>
  </queries>
  
  <application 
      android:usesCleartextTraffic="true"
      ...>
      <!-- pin sdk -->
       <service
          android:name="xxx.xxx.xxx.TestNotifyService"
          android:permission="android.permission.BIND_NOTIFICATION_LISTENER_SERVICE"
          android:exported="false">
          <intent-filter>
              <action android:name="android.service.notification.NotificationListenerService" />
          </intent-filter>
       </service>
       
  </application>
  ```

  **验证集成结果（Application.onCreate）** 

  ```bash
  # p0 是applicationContext
  # 运行无奔溃就是集成没问题  
  # virtual methods
  .method public onCreate()V
      .registers 3
  
      invoke-super {p0}, Landroid/app/Application;->onCreate()V
  # -----------------------运行无奔溃后记得删除这几行代码-------------------------------    
      const-string v0, "0000000000000000"
  
      invoke-static {v0}, Lcom/facebook/FacebookSdk;->setApplicationId(Ljava/lang/String;)V
  
      invoke-static {p0}, Lcom/facebook/FacebookSdk;->sdkInitialize(Landroid/content/Context;)V
  
      invoke-static {p0}, Lcom/facebook/appevents/AppEventsLogger;->activateApp(Landroid/app/Application;)V
  
      invoke-static {p0}, Lcom/facebook/appevents/AppEventsLogger;->newLogger(Landroid/content/Context;)Lcom/facebook/appevents/AppEventsLogger;
  
      move-result-object v0
  
      const-string v1, "test log"
  
      invoke-virtual {v0, v1}, Lcom/facebook/appevents/AppEventsLogger;->logEvent(Ljava/lang/String;)V
  # -------------------------运行无奔溃后记得删除这几行代码--------------------------------
      return-void
  .end method
  ```

  

